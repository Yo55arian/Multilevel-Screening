"0","# GP catchment female population for Jan 2017"
"0","# From: http://digital.nhs.uk/catalogue/PUB23139"
"0","gp_lsoa_catch <- read.csv(file=""data\\gp-reg-patients-LSOA-alt-tall.csv"", stringsAsFactors=F)"
"0","# calculate total LSOA population"
"0","LSOA_POP <- gp_lsoa_catch %>% "
"0","  group_by(LSOA_CODE) %>% "
"0","  summarise(""TOTAL_FEMALE""=sum(FEMALE_PATIENTS))"
"0","# Calc percentage of total lsoa pop registered with each practice"
"0","gp_lsoa_catch <- gp_lsoa_catch %>% "
"0","  left_join(LSOA_POP) %>% "
"0","  mutate(""PERCENTAGE_OF_LSOA""=FEMALE_PATIENTS/TOTAL_FEMALE)"
"2","Joining, by = ""LSOA_CODE""
"
"0","# Calc weighted ethnicity"
"0","gp_lsoa_catch <- gp_lsoa_catch %>%  "
"0","  left_join(lsoa_ethnic_demographics, by=c(""LSOA_CODE""=""LSOA""))"
"0","gp_lsoa_catch[,9:13] <- (gp_lsoa_catch[,9:13] * gp_lsoa_catch$PERCENTAGE_OF_LSOA)"
"0","# Calc weighted age bands"
"0","gp_lsoa_catch <- gp_lsoa_catch %>%  "
"0","  left_join(lsoa_age_demographics, by=c(""LSOA_CODE""=""LSOA""))"
"0","gp_lsoa_catch[,14:17] <- (gp_lsoa_catch[,14:17] * gp_lsoa_catch$PERCENTAGE_OF_LSOA)"
