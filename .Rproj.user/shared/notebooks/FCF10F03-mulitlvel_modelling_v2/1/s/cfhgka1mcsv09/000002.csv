"0","# now group up to practice level"
"0","gp_demographics <- gp_lsoa_catch %>% "
"0","  group_by(PRACTICE_CODE) %>% "
"0","  summarise_at(funs(sum(.,na.rm = TRUE)) , .vars=c(8:16)) %>% "
"0","  mutate(""Total_Pop""=`Asian/Asian British` +"
"0","                     `Black/African/Caribbean/Black British` +"
"0","                     `Mixed/multiple ethnic group` +"
"0","                     `Other ethnic group` +"
"0","                     `White`) %>% "
"0","  mutate("
"0","  ""Ethn_Asian""=`Asian/Asian British` / Total_Pop * 100, "
"0","  ""Ethn_Black""=`Black/African/Caribbean/Black British` / Total_Pop * 100,"
"0","  ""Ethn_Mixed""=`Mixed/multiple ethnic group` / Total_Pop * 100,"
"0","  ""Ethn_Other""=`Other ethnic group` / Total_Pop * 100,"
"0","  ""Ethn_White""=`White` / Total_Pop * 100) %>% "
"0","mutate("
"0","  ""Age_0_to_24""=Age_0_to_24 / Total_Pop * 100, "
"0","  ""Age_25_to_49""=Age_25_to_49 / Total_Pop * 100, "
"0","  ""Age_50_to_64""=Age_50_to_64 / Total_Pop * 100, "
"0","  ""Age_65_and_over""=Age_65_and_over / Total_Pop * 100"
"0","  ) %>% "
"0","  dplyr::select(PRACTICE_CODE, starts_with(""Ethn_""),starts_with(""Age_""))"
"0","# tidy up!"
"0","# use sort(sapply(ls(),function(x){object.size(get(x))}))"
"0","rm(gp_lsoa_catch)"
