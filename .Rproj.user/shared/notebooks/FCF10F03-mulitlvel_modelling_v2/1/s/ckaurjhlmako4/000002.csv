"0","# gp descriptive data"
"0","# # gp"
"0","# gp_info <- read.csv(file=""data\\egpcur.csv"", stringsAsFactors=FALSE, header=FALSE)"
"0","# "
"0","# # Create number of GPs per practice"
"0","# gp_info <- gp_info %>% "
"0","#   filter(V13==""A"") %>% # active GPs only "
"0","#   group_by(V15) %>% "
"0","#   summarise(""gp_number""=n()) %>% "
"0","#   dplyr::select(""practice_code""=V15, gp_number)"
"0","# gpp"
"0","gpp_info <- read.csv(file=""data\\epraccur.csv"", stringsAsFactors=FALSE, header=FALSE)"
"0","gpp_info <- gpp_info %>%"
"0","  mutate(""pcd_spaceless""=gsub("" "","""", V10)) %>%"
"0","  dplyr::select(""practice_code""=V1, pcd_spaceless, ""ccg_code"" = V15)"
"0","gp_staffing <- read.csv(""data\\General_Practice_March_2016_Practice_Level.csv"", stringsAsFactors=FALSE)"
"0","# only select columns we need"
"0","gp_staffing <- gp_staffing %>% dplyr::select(PRAC_CODE,"
"0","                              TOTAL_PATIENTS,"
"0","                              TOTAL_GP_HC,"
"0","                              TOTAL_GP_FTE,"
"0","                              MALE_GP_FTE,"
"0","                              FEMALE_GP_FTE,"
"0","                              TOTAL_NURSES_FTE,"
"0","                              TOTAL_GP_HC_COQ_UK"
"0","                              ) %>% "
"0","  filter_at(vars(-PRAC_CODE),all_vars(. != ""NS"")) %>%"
"0","  gather(-PRAC_CODE, key=""COL"", value=""VALUE"") %>% "
"0","  mutate(""VALUE""=as.numeric(VALUE)) %>% "
"0","  spread(COL, VALUE) %>% "
"0","  mutate("
"0","    ""FEMALE_GP_PROPORTION""=FEMALE_GP_FTE/TOTAL_GP_FTE,"
"0","    ""NON_UKQ_GP_PROPORTION""=1-(TOTAL_GP_HC_COQ_UK/TOTAL_GP_HC)"
"0","         ) %>% "
"0","  mutate("
"0","    ""FEMALE_GP_PROPORTION""=ifelse(is.na(FEMALE_GP_PROPORTION),0,FEMALE_GP_PROPORTION),"
"0","    ""NON_UKQ_GP_PROPORTION""=ifelse(is.na(NON_UKQ_GP_PROPORTION),0,NON_UKQ_GP_PROPORTION)"
"0","         )"
